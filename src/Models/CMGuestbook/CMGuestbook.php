<?phpclass CMGuestbook extends CObject implements IModule{	private $db = null;	public function __construct()	{		parent::__construct();	}		public function Manage($action=null)	{		switch($action)		{			case 'install':			{				if ($this->Init())				{					return array('success', 'Successfully created the database tables (or left them untouched if they already existed).');				}				else				{					return array('error', 'Unable to run query.');				}			} break;			default:				throw new Exception('Unsupported action for this module.');				break;		}	}		private function Init()	{		return $this->database->RunQuery("CREATE TABLE IF NOT EXISTS `posts` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `text` text NOT NULL,  `author` varchar(128) NOT NULL,  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=latin1;", true);	}		public function Add($entry)	{		$this->database->Insert('posts', $entry);		$this->session->AddMessage('info', 'Message inserted successfully.');	}		public function ReadAll()	{		return $this->database->Get('posts', '', array(), array('time'), false);	}		public function DeleteAll()	{		$this->database->Delete('posts');		$this->session->AddMessage('success', 'Removed all messages from the database table.');	}}